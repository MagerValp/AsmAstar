#include <string.h>
#include "map.h"


static uint8_t map[MAP_WIDTH * MAP_HEIGHT] = {
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,
    0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,0,0,1,0,0,0,
    0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,
    0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,
    0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,
    0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,1,1,0,0,
    0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,
    0,1,0,1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,
    0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,
    0,1,0,1,1,1,1,1,0,1,0,0,1,0,0,0,0,0,0,0,0,
    0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,
    0,1,0,1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,
    0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,
    0,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
};
uint8_t *map_line[MAP_HEIGHT];

uint8_t map_dest_x;
uint8_t map_dest_y;


void map_init(void) {
    static uint8_t y;
    
    for (y = 0; y < MAP_HEIGHT; ++y) {
        map_line[y] = &map[y * MAP_WIDTH];
    }
}


void map_clear(void) {
    memset(map, 0, MAP_WIDTH * MAP_HEIGHT);
}


void map_set(uint8_t x, uint8_t y, uint8_t t) {
    map_line[y][x] = t;
}
